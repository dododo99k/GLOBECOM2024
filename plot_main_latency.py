import pickle
import numpy as numpy
import matplotlib.pyplot  as plt
import matplotlib
import torch
import numpy as np
from ppo import PPO, PPOBuffer
from parameters import TIME_SCALE
font_size = 14
fig_size = (4,3)
line_size = 2.0




# 'intensity 0.03' 'v num 20' 'length 10000' 'H_MIN 0.05'
latency_cdf_list = {'pso': [138, 116, 149, 195, 184, 223, 221, 255, 256, 197, 189, 168, 184, 378, 132, 200, 160, 184, 158, 166, 200, 191, 232, 187, 214, 206, 209, 145, 225, 176, 182, 217, 212, 205, 128, 174, 231, 184, 262, 152, 198, 167, 153, 142, 148, 143, 172, 146, 171, 157, 211, 201, 155, 196, 212, 145, 192, 198, 183, 243, 158, 188, 181, 170, 306, 285, 301, 191, 209, 198, 190, 129, 169, 225, 244, 336, 361, 184, 184, 328, 325, 195, 154, 171, 175, 180, 184, 127, 172, 140, 217, 291, 298, 214, 246, 147, 111, 230, 210, 177, 130, 168, 146, 204, 177, 191, 162, 157, 306, 399, 393, 218, 452, 244, 141, 163, 132, 248, 170, 220, 197, 152, 204, 180, 166, 126, 204, 230, 149, 147, 157, 347, 178, 202, 217, 159, 211, 146, 231, 192, 162, 203, 183, 238, 248, 434, 120, 270, 153, 161, 204, 229, 188, 286, 431, 444, 207, 195, 194, 414, 431, 380, 420, 187, 251, 195, 517, 343, 372, 206, 208, 240, 689, 709, 691, 214, 142, 172, 166, 217, 181, 159, 184, 155, 173, 208, 182, 134, 221, 138, 180, 137, 171, 229, 138, 162, 208, 228, 228, 186, 213, 225, 211, 195, 134, 205, 143, 220, 152, 132, 140, 320, 356, 131, 140, 153, 156, 160, 271, 136, 277, 233, 143, 133, 156, 187, 136, 145, 115, 258, 234, 134, 227, 223, 117, 201, 146, 226, 194, 168, 196, 241, 182, 293, 171, 148, 206, 302, 157, 182, 173, 160, 198, 171, 173, 195, 135, 193, 356, 168, 288, 296, 144, 165, 152, 146, 178, 208, 219, 191, 194, 222, 154, 215, 195, 133, 179, 143], 'fpsomr': [113, 172, 194, 272, 210, 225, 200, 171, 423, 461, 132, 555, 389, 491, 433, 150, 200, 258, 175, 194, 574, 206, 206, 209, 438, 217, 176, 552, 563, 114, 158, 396, 404, 152, 207, 254, 305, 142, 547, 555, 528, 148, 145, 172, 632, 455, 417, 280, 181, 155, 399, 147, 188, 183, 220, 132, 166, 177, 590, 626, 199, 593, 182, 209, 600, 644, 470, 214, 198, 166, 129, 590, 225, 236, 157, 609, 196, 430, 292, 516, 301, 181, 288, 456, 186, 129, 421, 140, 408, 420, 188, 229, 109, 165, 485, 496, 542, 363, 478, 156, 148, 113, 567, 211, 189, 226, 412, 456, 473, 555, 521, 236, 387, 363, 210, 224, 237, 182, 193, 269, 326, 171, 205, 126, 146, 310, 143, 269, 171, 184, 603, 486, 509, 207, 231, 170, 179, 172, 222, 294, 118, 317, 157, 161, 201, 204, 458, 243, 202, 446, 193, 220, 624, 732, 777, 764, 315, 325, 590, 210, 166, 324, 608, 351, 459, 199, 488, 200, 392, 188, 384, 162, 365, 187, 189, 231, 236, 207, 362, 200, 413, 447, 379, 212, 212, 249, 286, 166, 278, 189, 188, 182, 140, 472, 180, 526, 311, 582, 552, 159, 224, 136, 412, 482, 261, 478, 330, 251, 157, 134, 121, 259, 193, 737, 793, 146, 490, 184, 459, 500, 390, 551, 210, 261, 160, 136, 136, 237, 133, 143, 439, 185, 492, 495, 492, 138, 185, 145, 117, 130, 417, 356, 343, 237, 208, 462, 146, 210, 370, 357, 289, 183, 140, 274, 169, 194, 539, 424, 159, 247, 173, 194, 423, 207, 694, 231, 371, 180, 272, 466, 357, 167, 187, 284, 428, 288, 404], 'least': [116, 188, 208, 186, 180, 449, 498, 139, 241, 595, 614, 147, 735, 179, 792, 353, 386, 373, 209, 906, 456, 452, 897, 916, 217, 164, 476, 509, 300, 530, 315, 116, 215, 154, 223, 425, 409, 223, 184, 282, 167, 342, 145, 153, 142, 238, 277, 277, 173, 165, 158, 189, 165, 190, 417, 436, 223, 208, 369, 373, 178, 161, 283, 325, 306, 380, 179, 172, 214, 487, 195, 332, 353, 182, 160, 253, 365, 286, 394, 198, 370, 382, 289, 304, 127, 155, 276, 301, 232, 323, 147, 238, 576, 112, 213, 369, 620, 615, 165, 244, 152, 153, 349, 227, 236, 166, 628, 141, 301, 689, 774, 826, 821, 779, 801, 384, 864, 896, 189, 310, 196, 181, 362, 145, 159, 344, 350, 270, 184, 298, 445, 519, 545, 130, 184, 287, 183, 172, 359, 403, 430, 124, 486, 494, 313, 150, 405, 358, 220, 461, 350, 467, 186, 481, 381, 153, 420, 203, 174, 329, 150, 352, 290, 301, 206, 331, 206, 348, 204, 212, 389, 221, 518, 174, 526, 157, 178, 217, 1369, 208, 272, 1608, 296, 185, 137, 420, 401, 447, 1577, 1664, 261, 180, 138, 1785, 1874, 1854, 261, 2014, 291, 251, 147, 141, 2043, 1899, 2105, 228, 399, 421, 242, 211, 228, 134, 167, 123, 154, 357, 138, 354, 184, 133, 483, 564, 556, 250, 263, 162, 307, 397, 390, 399, 384, 272, 126, 358, 222, 212, 554, 554, 127, 334, 609, 203, 495, 143, 677, 518, 726, 201, 282, 170, 620, 574, 120, 233, 238, 183, 171, 148, 278, 159, 335, 190, 142, 162, 372, 436, 453, 353, 387, 154, 194, 168, 241, 272, 574, 555, 572]}
fail_prob_cdf_list = {'pso': [0.004445331589394431, 0.0031753284238755686, 0.0051541667809915405, 0.014090925207434624, 0.008165225796564082, 0.0012297096755749409, 0.0020195834840961943, 0.0017153554041272779, 0.024590585084873225, 0.0008691431124256288, 0.008376792309850677, 0.00660235533107893, 0.007725504736490928, 0.03331617439686839, 0.004079266496135608, 0.0009622653498196724, 0.006194419398446288, 0.007885683196075358, 0.005769933078308129, 0.006343939749150253, 0.000861784444348992, 0.0008326871669160835, 0.01199567671173848, 0.0019602960105661715, 0.0024874184550528404, 0.02327075240629233, 0.0009813689501390296, 0.00502075669705758, 0.011321524542345696, 0.007096229890422742, 0.0007360596949471727, 0.0020243858899155506, 0.017983814981900572, 0.0009677082938650119, 0.007257242541524388, 0.009937616792372244, 0.0012978621072225506, 0.013555441160047341, 0.002521099474928714, 0.0053897731081903105, 0.008969767273417561, 0.006674907324224663, 0.005423893233749575, 0.005047631904961176, 0.005087727259471063, 0.004825723804064749, 0.007167842403577092, 0.005119446610707171, 0.006715287363302153, 0.005769702068322197, 0.0010355149368226342, 0.0008741310686273921, 0.005973960039277822, 0.0008174508049775662, 0.010296140516322543, 0.005150453949857693, 0.008544984445949755, 0.0008374229809077326, 0.0008218935256666272, 0.013544320678642318, 0.006050132875021491, 0.0018940125788005115, 0.0076446108716763375, 0.006640247793468966, 0.020127175833312513, 0.0031672471952151086, 0.01988237224435015, 0.0008380893463110238, 0.0009902287913596053, 0.0009485500342557929, 0.001605466582326807, 0.003960269898883729, 0.006751517010040236, 0.017305221134295664, 0.0036193954020878557, 0.023915436446739855, 0.027273637072985694, 0.008005606981638729, 0.0008653811283544069, 0.02287897594488785, 0.02249517319127591, 0.0008017044647682468, 0.0055951633908806414, 0.006715287363302153, 0.007402128795932672, 0.007407840868815648, 0.0006790320835025662, 0.004015934474352018, 0.0067907107281979465, 0.0045705955869093555, 0.0011252762224170495, 0.018335897870184, 0.01916310994985782, 0.010797137594209496, 0.013803447913427056, 0.005415556051268099, 0.0029402318424369585, 0.012380570433095801, 0.0010526915773986715, 0.00717356305099869, 0.004078330365193305, 0.0064913224944093875, 0.005086798587699838, 0.0009118390991474377, 0.00717356305099869, 0.0007556009614776987, 0.006053821651016858, 0.0056999389545787996, 0.020127175833312513, 0.032710259727597876, 0.03182608499562583, 0.001101329478365599, 0.0409179663937385, 0.0015976829801601221, 0.004633832646067287, 0.006125768706815802, 0.004079266496135608, 0.014829112432096078, 0.011805001684617789, 0.011176560159882781, 0.0012483517735441497, 0.0053558676223590075, 0.0009850182973993114, 0.000791522906798554, 0.011128718512709542, 0.003756556553718256, 0.00940326784953904, 0.017849851491614672, 0.005287310311400007, 0.005021685833280813, 0.0056999389545787996, 0.026570825145040704, 0.0006986989360450752, 0.009359021683883965, 0.0011252762224170495, 0.012011886573517722, 0.00327513199854437, 0.009745419409908192, 0.018332346346022092, 0.0011562793568088352, 0.006803281215153983, 0.0011110711210547044, 0.0010748238753527373, 0.01634900476124095, 0.015387426417987416, 0.03805231687534766, 0.0034461862326171547, 0.026397638579443924, 0.006372363147413277, 0.009632164458035095, 0.010620666700210238, 0.0024613590036293696, 0.0058748746553654125, 0.0032040733739561464, 0.0425798013167255, 0.04457908239966934, 0.003076017425694, 0.0019792262653977218, 0.018293035779409002, 0.034961651290770446, 0.03758237025851475, 0.05018304178390816, 0.013980179200256742, 0.0008156727568586836, 0.022244844757457426, 0.0009185365403141848, 0.02010031787084283, 0.024904039955898582, 0.03269806603102513, 0.009579129319887776, 0.0009636896438900785, 0.013436775276331624, 0.08698346769233653, 0.09199886019891705, 0.08862441678694273, 0.0010772110423731259, 0.004697472230729819, 0.0067907107281979465, 0.006453814691887736, 0.0011493241922416668, 0.00748669089388379, 0.005840319031918715, 0.008205080644350996, 0.010258921109208714, 0.0011887682921249724, 0.010156124083276716, 0.0006684548796086166, 0.004229956923768007, 0.0011843862302245835, 0.004445331589394431, 0.007407840868815648, 0.0045068288289284875, 0.006715287363302153, 0.0013189671329562243, 0.0046627488464113225, 0.006909705917682812, 0.0011321365777258014, 0.0012507071499589402, 0.012660023905684192, 0.0007003808423290534, 0.010206040894025511, 0.0012351590304035284, 0.010025121187709525, 0.0008601968726531236, 0.004199661929780924, 0.0155176298464346, 0.00476151370576537, 0.010850527369421988, 0.005423661645516189, 0.004079266496135608, 0.0045705955869093555, 0.0222388769871137, 0.004446628647366995, 0.004019680871787849, 0.0045705955869093555, 0.005628256113589963, 0.005630337283939913, 0.005982033275907293, 0.016499937092090702, 0.00432168533429224, 0.017513503363126424, 0.001351413209627755, 0.0049539515307975915, 0.007559806665556645, 0.006011018250597685, 0.001149934242121914, 0.004383072476693937, 0.005215205368142469, 0.003122363133987023, 0.017325664452384593, 0.012191429568761186, 0.004471772337477939, 0.00133987316099702, 0.011414771844281182, 0.003282278623720663, 0.0008823950116269211, 0.004956043133057324, 0.011987662428718099, 0.008545892002031515, 0.0064913224944093875, 0.0009358560528724785, 0.002804590114889892, 0.007565918617203711, 0.018570676027696836, 0.006715287363302153, 0.006723212979787513, 0.0020651639617096248, 0.020183742591225372, 0.0056999389545787996, 0.007565918617203711, 0.007245558552051219, 0.005911096192939777, 0.0009746129891768705, 0.006715287363302153, 0.006866517275211905, 0.002137343142193233, 0.004382372131525911, 0.0007784367071838279, 0.026587773257716236, 0.0064913224944093875, 0.017986096120631276, 0.018925198136088697, 0.005116197070470874, 0.0062708283743067314, 0.005491387908535922, 0.010857198133479878, 0.000630732614943371, 0.015441961243293612, 0.0011638211100490647, 0.008295864843851426, 0.0015002350146904825, 0.01852672119401989, 0.005663644127808066, 0.012290589063584274, 0.0008368525394462755, 0.004139260396109575, 0.007485777419473767, 0.004921918637804525], 'fpsomr': [0.0030695810008393694, 0.0067907107281979465, 0.010042547526395822, 0.1271573675112807, 0.010783696688639864, 0.012737098123816619, 0.010210545703418193, 0.007575494740898918, 0.19063071894727412, 0.20586356499776803, 0.004288165252304403, 0.24232443539702564, 0.17675382174347687, 0.21768671620548974, 0.19466746507732835, 0.006974113484410784, 0.009184980181918444, 0.12102603445441684, 0.08378112834912244, 0.009172774019942868, 0.24948827116293204, 0.011110831040701274, 0.010980590091192644, 0.010157922484134416, 0.19667828184637348, 0.01293974007801337, 0.00744259300915616, 0.24118706923875866, 0.24534908432471803, 0.0031482624708881594, 0.006120007874378787, 0.17963014686216894, 0.1829050720577634, 0.006432478580186095, 0.011292669203408491, 0.014486733546069037, 0.020429867871756994, 0.005047631904961176, 0.2392876636441359, 0.24232443539702564, 0.23202646034329388, 0.005187013644415025, 0.0060511078533589105, 0.008028122465565495, 0.27094054983237625, 0.20347757850250814, 0.18819896529745628, 0.13064176460119414, 0.0865256660990471, 0.005973960039277822, 0.18085977918707596, 0.006196242144385318, 0.08971723775923302, 0.008636729990966405, 0.010990395448138762, 0.005380279996512965, 0.006782452373923201, 0.007906547461427391, 0.2554684125340906, 0.26875008743111795, 0.09471005013149203, 0.2565843727358956, 0.009951552073319303, 0.009979609670540462, 0.2591817793182821, 0.2753018096700971, 0.20942915037126442, 0.01047921138493868, 0.010323508856305773, 0.00811808805812895, 0.004164674637364995, 0.2554684125340906, 0.014729413416867091, 0.017822338192053915, 0.006807820287040081, 0.262507971765396, 0.09335109624607907, 0.19345855982267313, 0.1358422968153572, 0.22740476789307196, 0.13972226999258686, 0.0865256660990471, 0.134112251940795, 0.20387574016454624, 0.08880649970385945, 0.003989514395069959, 0.18982094484665235, 0.005446945010384534, 0.1845376288127073, 0.18941575402981292, 0.009103996322786922, 0.012041758314035525, 0.0028636027682685888, 0.006707024878817802, 0.21533625242127752, 0.21964005672196574, 0.23738350359493465, 0.16598175469652043, 0.21258511762731214, 0.07503557345646072, 0.005153934729118197, 0.003095506486179924, 0.2468568778599355, 0.012161788365705755, 0.00862181101721798, 0.014422278880171236, 0.18616692371707932, 0.20387574016454624, 0.21061411769803118, 0.24232443539702564, 0.22933384362394882, 0.0131276589906227, 0.17593016380488913, 0.16598175469652043, 0.09967547741373439, 0.10595574249964279, 0.01268597937050515, 0.008159313383919639, 0.00974687960243668, 0.12584712112342789, 0.15040881158540975, 0.007538299761826579, 0.010191657274076784, 0.003928198870782391, 0.005994800939988283, 0.1435848225163865, 0.0054643055597910955, 0.12584712112342789, 0.007612671127130328, 0.008205080644350996, 0.2602921736453605, 0.21572848622844354, 0.22469594690923023, 0.010637480506578999, 0.01262445345924209, 0.007865098207667858, 0.007485777419473767, 0.008731364417322791, 0.011084866417929874, 0.1367060225836806, 0.003739659770388218, 0.021672325198434948, 0.007728905589357887, 0.0062315972654582085, 0.09561488758722958, 0.017179802637044647, 0.20467146649490608, 0.02176354863384199, 0.014490116980124817, 0.19988515070544588, 0.014497615483089957, 0.030171829719381545, 0.26801847177168736, 0.3064971987902442, 0.32192677812011694, 0.31750494679460994, 0.04200174697963202, 0.02792204308979761, 0.2554684125340906, 0.09967547741373439, 0.006380583044078482, 0.027538230449753946, 0.2621391335494089, 0.04994685568140535, 0.20506903136215915, 0.024230674657243968, 0.2165123657371375, 0.010040471613498391, 0.17798776532181348, 0.08971723775923302, 0.17469313150831767, 0.07780630855539195, 0.16681535607166953, 0.008615461287598498, 0.09017226537397005, 0.01842304806901902, 0.018798759903739526, 0.010286032091340025, 0.027549734387570204, 0.009399655730128327, 0.18657373854303894, 0.20028510813240397, 0.17262728310254383, 0.10057535192407596, 0.10057535192407596, 0.1170617386336118, 0.1332459311045111, 0.07964885277987532, 0.12977197154174847, 0.09017226537397005, 0.008171593003018052, 0.01006701156259481, 0.005260187308649186, 0.2102193260671973, 0.007486462525295563, 0.23125810268883973, 0.14401292307107083, 0.25248432198190895, 0.24118706923875866, 0.006262541065150536, 0.013565489752233713, 0.06573952642278647, 0.18616692371707932, 0.21415837361165446, 0.12234350705126151, 0.21258511762731214, 0.15210629591208413, 0.11794423557296707, 0.005943804944049278, 0.004260236774044333, 0.004050948466105858, 0.12146541158375357, 0.008754015659544286, 0.30822879040188356, 0.32732972329876453, 0.07039916997420725, 0.21729546175813186, 0.08789485045490963, 0.20506903136215915, 0.22119921692859512, 0.1771653419439816, 0.24080756790595104, 0.09967547741373439, 0.12234350705126151, 0.006546983424946547, 0.06573952642278647, 0.0069066768907909675, 0.01268597937050515, 0.000709222899049601, 0.00807769571693659, 0.1970798423069693, 0.013363761714803917, 0.21807777507452275, 0.2192497791890743, 0.21807777507452275, 0.004910295706929441, 0.008766624941313013, 0.006496728380303479, 0.003335791343877799, 0.004518085768011741, 0.18819896529745628, 0.16305757651123187, 0.1575997319799758, 0.014647542454122559, 0.010023096469765987, 0.2062605339647573, 0.07039916997420725, 0.010605735225046566, 0.16889571614787435, 0.1634759431226075, 0.1345450875968931, 0.007765123451252278, 0.06760618009405173, 0.1280297738678906, 0.006640018165393091, 0.009877579720898923, 0.23623872047763583, 0.1910353024335002, 0.005946112158736609, 0.11617835875592153, 0.012146025666228593, 0.014296109157924303, 0.19063071894727412, 0.09832397725814457, 0.29319467174225056, 0.01367964398885333, 0.16931116441907745, 0.08606881472877181, 0.1271573675112807, 0.20784642647568596, 0.1634759431226075, 0.006564673660638975, 0.0892619825738008, 0.13237874351408596, 0.19265161497731853, 0.134112251940795, 0.1829050720577634], 'least': [0.05635005256320147, 0.08971723775923302, 0.09877470257879528, 0.08880649970385945, 0.08606881472877181, 0.20108442330007814, 0.22042002661529958, 0.06713986661544402, 0.11352291265462167, 0.25732741677921767, 0.2643493990927467, 0.07086385420848074, 0.3075366731913566, 0.0856117348756954, 0.3269933040626136, 0.16180122084481563, 0.17551802586089182, 0.17014143804865411, 0.09922520259311685, 0.3642818663735857, 0.20387574016454624, 0.20228189833432575, 0.3614146884603231, 0.3674525237926366, 0.102821105183029, 0.0787280413036513, 0.2117973089062296, 0.22469594690923023, 0.1392920235749422, 0.23279405002414433, 0.1457231863915205, 0.05635005256320147, 0.1019234775491974, 0.07411014639350466, 0.10550860859673217, 0.19143968367854758, 0.1849452580824913, 0.10550860859673217, 0.08789485045490963, 0.13151068830233215, 0.08010891332876358, 0.1571784265283801, 0.06993425333972147, 0.07364708571117784, 0.06853810787240788, 0.1121921992380499, 0.12933674873088374, 0.12933674873088374, 0.0828644512152944, 0.07918856214319547, 0.07596007555491324, 0.09017226537397005, 0.07918856214319547, 0.09062706553176858, 0.18819896529745628, 0.19587455833344036, 0.10550860859673217, 0.09877470257879528, 0.1684800601005959, 0.17014143804865411, 0.08515442642554805, 0.07734509641624343, 0.13194482441510824, 0.14998390977460185, 0.1418702781886062, 0.1730408660566377, 0.0856117348756954, 0.08240576877984906, 0.1014743270096945, 0.21612052396772707, 0.09289765844419828, 0.15295376581060038, 0.16180122084481563, 0.08698228910073424, 0.07688365361336424, 0.11882585045648453, 0.16681535607166953, 0.1332459311045111, 0.17880936668734204, 0.0942572919764515, 0.16889571614787435, 0.17386741184880616, 0.1345450875968931, 0.14101171925887657, 0.061525880699335955, 0.07457297560336318, 0.12890130825420165, 0.13972226999258686, 0.10952477670252736, 0.1491334685346266, 0.07086385420848074, 0.1121921992380499, 0.25023840776095874, 0.05446086410960371, 0.10102495183876858, 0.1684800601005959, 0.26655304377571076, 0.2647171324521993, 0.07918856214319547, 0.11485163149737287, 0.07318379344061776, 0.07364708571117784, 0.16012314577078957, 0.10729580358881496, 0.11130394738538263, 0.07964885277987532, 0.26948097184057507, 0.06807226047419968, 0.13972226999258686, 0.2914254478131655, 0.3209089050733632, 0.33833771717215166, 0.33668149204629183, 0.32260451241836985, 0.33001503021133605, 0.17469313150831767, 0.35079062331485256, 0.36109531596808375, 0.09017226537397005, 0.1435848225163865, 0.09335109624607907, 0.0865256660990471, 0.16556464130421045, 0.06993425333972147, 0.07642198003139355, 0.1580208268315001, 0.16054297923079264, 0.12628408831196558, 0.08789485045490963, 0.13843088510104173, 0.1994849932497712, 0.22856279200601815, 0.23852657082479478, 0.06293253662259657, 0.08789485045490963, 0.13367919981275533, 0.08743868384798881, 0.08240576877984906, 0.16431204905684227, 0.18249642243990127, 0.19345855982267313, 0.06011711320891111, 0.21572848622844354, 0.2188593064686235, 0.14486848229709015, 0.07225651367144714, 0.18331351740188917, 0.1638941006029645, 0.10416586470347178, 0.20586356499776803, 0.16054297923079264, 0.2082424042597526, 0.08880649970385945, 0.21376535455188328, 0.17345424227094375, 0.07364708571117784, 0.18941575402981292, 0.09651882065777928, 0.08332290436684775, 0.15168224305566058, 0.07225651367144714, 0.16138201666292595, 0.1349777068892587, 0.13972226999258686, 0.09787302651848351, 0.15253013679507732, 0.09787302651848351, 0.1597031023415686, 0.09697044833112323, 0.10057535192407596, 0.17675382174347687, 0.10461366981051401, 0.22817697695629657, 0.08332290436684775, 0.23125810268883973, 0.0754979400684469, 0.08515442642554805, 0.102821105183029, 0.4956576622886052, 0.09877470257879528, 0.1271573675112807, 0.5524647618955876, 0.1375688850579545, 0.08835078903553828, 0.06620653989647718, 0.18941575402981292, 0.1816785099742677, 0.20028510813240397, 0.5454739266939425, 0.5648219407336433, 0.12234350705126151, 0.08606881472877181, 0.06667331992179804, 0.5903696043990561, 0.6081985215509998, 0.6042608512287633, 0.12234350705126151, 0.6346867228641386, 0.13541010992604652, 0.11794423557296707, 0.07086385420848074, 0.06807226047419968, 0.6399455467706323, 0.6130655576830855, 0.6509360026168836, 0.1077420441175917, 0.18085977918707596, 0.18982094484665235, 0.11396604040712444, 0.10012552715321665, 0.1077420441175917, 0.06480479866322342, 0.08010891332876358, 0.059647054260571375, 0.07411014639350466, 0.1634759431226075, 0.06667331992179804, 0.16222021547700616, 0.08789485045490963, 0.06433708414366923, 0.21455119621101504, 0.24572631546691104, 0.24270317848566447, 0.11750309741540454, 0.12322072486220326, 0.07780630855539195, 0.1422992358011721, 0.18004022925959517, 0.1771653419439816, 0.18085977918707596, 0.17469313150831767, 0.1271573675112807, 0.06105652631086678, 0.1638941006029645, 0.10506125107096898, 0.10057535192407596, 0.24194550288949168, 0.24194550288949168, 0.061525880699335955, 0.15380038866281176, 0.262507971765396, 0.09651882065777928, 0.2192497791890743, 0.06900372240513819, 0.28716122061111227, 0.22817697695629657, 0.3044135665009049, 0.09561488758722958, 0.13151068830233215, 0.08148771559854262, 0.26655304377571076, 0.24948827116293204, 0.05823546641575128, 0.10996990302332244, 0.1121921992380499, 0.08743868384798881, 0.08194685694584114, 0.07132830615871277, 0.12977197154174847, 0.07642198003139355, 0.15422338271115588, 0.09062706553176858, 0.06853810787240788, 0.07780630855539195, 0.16972640501806735, 0.19587455833344036, 0.20268065768701293, 0.16180122084481563, 0.17593016380488913, 0.07411014639350466, 0.0924439938667273, 0.08056874390487534, 0.11352291265462167, 0.1271573675112807, 0.24948827116293204, 0.24232443539702564, 0.24873738405311396]}



x = np.mean(latency_cdf_list['pso'])
y = np.mean(latency_cdf_list['fpsomr'])
z = np.mean(latency_cdf_list['least'])

print(x,y,z)
print(1- x/y)
print(1- x/z)

################## plot cdf of Delay #######

def fix_hist_step_vertical_line_at_end(ax):
    axpolygons = [poly for poly in ax.get_children() if isinstance(poly, matplotlib.patches.Polygon)]
    for poly in axpolygons:
        poly.set_xy(poly.get_xy()[:-1])

###############################################################


fig, ax = plt.subplots(figsize=fig_size)
plt.hist(np.array(latency_cdf_list['pso']), bins=300,cumulative=True, density=True, label='CAVE', histtype='step',  color='C0',linewidth=line_size)
plt.hist(np.array(latency_cdf_list['fpsomr']), bins=300,cumulative=True, density=True, label='FPSO-MR', histtype='step',  color='C1',linewidth=line_size)
plt.hist(np.array(latency_cdf_list['least']), bins=300,cumulative=True, density=True, label='Baseline', histtype='step',  color='C2',linewidth=line_size)

fix_hist_step_vertical_line_at_end(ax)

plt.legend(prop=dict(size=font_size-2),loc='lower right')
plt.xlabel('Avg. latency (ms)',fontsize=font_size-2)
plt.ylabel('Cumulative probability',fontsize=font_size-2)
plt.tight_layout()
plt.grid(which='both',linestyle='--',axis='y',color='gray')
# plt.xlim(0,2000)
plt.subplots_adjust(left=0.135, bottom=0.237, right=0.965, top=0.940) # adjust when plt.show() and copy to here

# plt.show()
plt.savefig("results_/main_latency.pdf", format = 'pdf', dpi=300)
print('done')


###############################################################


fig, ax = plt.subplots(figsize=fig_size)
plt.hist(np.array(fail_prob_cdf_list['pso']), bins=300,cumulative=True, density=True, label='CAVE', histtype='step',  color='C0',linewidth=line_size)
plt.hist(np.array(fail_prob_cdf_list['fpsomr']), bins=300,cumulative=True, density=True, label='FPSO-MR', histtype='step',  color='C1',linewidth=line_size)
plt.hist(np.array(fail_prob_cdf_list['least']), bins=300,cumulative=True, density=True, label='Baseline', histtype='step',  color='C2',linewidth=line_size)

fix_hist_step_vertical_line_at_end(ax)

plt.legend(prop=dict(size=font_size-2),loc='lower right')
plt.xlabel('Failure probability',fontsize=font_size-2)
plt.ylabel('Cumulative probability',fontsize=font_size-2)
plt.tight_layout()
plt.grid(which='both',linestyle='--',axis='y',color='gray')
# plt.xlim(0,2000)
plt.subplots_adjust(left=0.135, bottom=0.237, right=0.965, top=0.940) # adjust when plt.show() and copy to here

# plt.show()
plt.savefig("results_/main_failure.pdf", format = 'pdf', dpi=300)
print('done')

